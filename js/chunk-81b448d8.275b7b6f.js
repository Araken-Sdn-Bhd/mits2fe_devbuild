(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-81b448d8"],{5414:function(e,t,a){"use strict";a("94df")},"94df":function(e,t,a){},e676:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[1==e.patientExist?a("div",{staticClass:"mb-3"},[a("va-notification",{attrs:{color:"danger"}},[a("va-badge",{attrs:{color:"danger"}},[e._v(" "+e._s(e.$t("Incomplete"))+" ")]),a("span",[e._v("Patient with the specified NRIC/PASSPORT already registered in MITS2.")]),a("button",{staticClass:"btn close-button",attrs:{type:"button"},on:{click:function(t){e.patientExist=!1}}},[a("span",{staticClass:"fa fa-close"})])],1)],1):e._e(),1==e.tabA?a("div",{staticClass:"mb-3"},[a("va-notification",{attrs:{color:"danger"}},[a("va-badge",{attrs:{color:"danger"}},[e._v(" "+e._s(e.$t("Incomplete"))+" ")]),a("span",[e._v("Please fill all "),a("b",[e._v(" Demographic ")]),e._v(" required fields.")]),a("button",{staticClass:"btn close-button",attrs:{type:"button"},on:{click:function(t){e.tabA=!1}}},[a("span",{staticClass:"fa fa-close"})])],1)],1):e._e(),a("va-card",[a("form-wizard",{ref:"wizard",attrs:{color:"#bf1304","error-color":"#a94442"},scopedSlots:e._u([{key:"footer",fn:function(t){return[a("div",{staticClass:"float-right"},[0==e.update?a("button",{staticClass:"ml-2 btn btn-primary btn-fill btn-md",attrs:{type:"submit"},on:{click:e.validateForm}},[a("div",{staticClass:"fa fa-paper-plane"}),e._v(" SUBMIT ")]):e._e(),1==e.update?a("button",{staticClass:"ml-2 btn btn-primary btn-fill btn-md",attrs:{type:"submit"},on:{click:e.validateUpdateForm}},[a("div",{staticClass:"fa fa-paper-plane"}),e._v(" UPDATE ")]):e._e()])]}}])},[a("h3",{attrs:{slot:"title"},slot:"title"}),a("tab-content",{attrs:{icon:"fa fa-user-circle-o",title:"1. Demographic"}},[a("vue-form-generator",{ref:"demographic",attrs:{model:e.model,schema:e.schema,options:e.formOptions},on:{"model-updated":e.onModelUpdated}})],1)],1)],1)],1)])])])},s=[],i=a("a34a"),n=a.n(i),o=a("8e5f"),r=a.n(o),u=a("4309"),c=a.n(u),d=(a("e517"),a("a026")),p=a("5f5b"),m=a("b1e0"),I=(a("f9e3"),a("2dd8"),a("6dfc"),a("2ee4")),v=a.n(I);a("da93");function T(e,t,a,l,s,i,n){try{var o=e[i](n),r=o.value}catch(u){return void a(u)}o.done?t(r):Promise.resolve(r).then(l,s)}function f(e){return function(){var t=this,a=arguments;return new Promise((function(l,s){var i=e.apply(t,a);function n(e){T(i,l,s,n,o,"next",e)}function o(e){T(i,l,s,n,o,"throw",e)}n(void 0)}))}}d["default"].use(v.a),d["default"].use(p["a"]),d["default"].use(m["a"]),d["default"].use(c.a),d["default"].component("multiselect",r.a),a("7fd9"),a("b0f4");var S={name:"modals",components:{},data:function(){var e=this;return{tabA:!1,patientExist:!1,submitPath:!1,update:!1,radioCitizenship:[],selectNRICType:[],selectIssuingCountry:[],selectEmpStatus:[],radioGender:[],selectRace:[],selectIncomeStatus:[],selectReligion:[],selectMaritalStatus:[],selectEducationLevel:[],model:{PATIENT_EXIST_ID:"",SH_NAME:"",CITIZENSHIP:"",NRIC_TYPE:"",NRIC_NO:"",PASSPORT_NO:"",PASSPORT_EXPIRY_DATE:"",ISSUING_COUNTRY:"",GENDER:"",BIRTH_DATE:"",AGE:"",HOSPITAL_MRN:"",MENTARI_MRN:"",EMPLOYMENT_STATUS:"",INCOME_STATUS:"",RACE:"",SPECIFY_RACE:"",RELIGION:"",SPECIFY_RELIGION:"",MARITAL_STATUS:"",SPECIFY_MARITAL_STATUS:"",EDUCATION_LEVEL:"",EDUCATION_LEVEL_SPECIFY:""},schema:{groups:[{fields:[{type:"input",inputType:"text",label:"Name (as in NRIC)",model:"SH_NAME",validator:"string",required:!0,styleClasses:"col-lg-8"}]},{fields:[{type:"radios",label:"Citizenship",model:"CITIZENSHIP",required:!0,validator:"required",styleClasses:"col-md-12",values:function(){return e.radioCitizenship},onChanged:function(e,t,a,l){e.MD_CITIZENSHIP=e.CITIZENSHIP,1===t||2===t?(e.PASSPORT_NO="",e.PASSPORT_EXPIRY_DATE="",e.ISSUING_COUNTRY="",e.NRIC_TYPE="",e.NRIC_NO=""):3===t&&(e.NRIC_TYPE="",e.NRIC_NO="")}},{type:"vueMultiSelect",placeholder:"Please select",label:"NRIC Type",model:"NRIC_TYPE",required:!0,validator:"required",selectOptions:{multiple:!1,closeOnSelect:!0,maxHeight:200,showLabels:!1,allowEmpty:!1,key:"value",label:"name"},styleClasses:"col-md-6",values:function(){return e.selectNRICType},visible:function(e){return e&&1===e.CITIZENSHIP},onChanged:function(e,t,a,l){e.NRIC_NO=""}},{type:"cleave",label:"NRIC NO",model:"NRIC_NO",required:!0,cleaveOptions:{blocks:[6,2,4],delimiter:"-",numericOnly:!0},placeholder:"XXXXXX-XX-XXXX",validator:"string",styleClasses:"col-md-6",visible:function(e){return e&&(1===e.CITIZENSHIP&&2===e.NRIC_TYPE.value||2===e.CITIZENSHIP)}},{type:"input",inputType:"text",label:"NRIC NO",model:"NRIC_NO",validator:"string",required:!0,styleClasses:"col-md-6",visible:function(e){return e&&(1===e.CITIZENSHIP&&1===e.NRIC_TYPE.value||1===e.CITIZENSHIP&&3===e.NRIC_TYPE.value||1===e.CITIZENSHIP&&4===e.NRIC_TYPE.value||1===e.CITIZENSHIP&&5===e.NRIC_TYPE.value||1===e.CITIZENSHIP&&6===e.NRIC_TYPE.value||1===e.CITIZENSHIP&&7===e.NRIC_TYPE.value||1===e.CITIZENSHIP&&8===e.NRIC_TYPE.value||1===e.CITIZENSHIP&&9===e.NRIC_TYPE.value||1===e.CITIZENSHIP&&10===e.NRIC_TYPE.value||1===e.CITIZENSHIP&&11===e.NRIC_TYPE.value)}},{type:"input",inputType:"text",label:"Passport NO",model:"PASSPORT_NO",validator:"string",required:!0,styleClasses:"col-md-4",visible:function(e){return e&&3===e.CITIZENSHIP}},{type:"input",inputType:"date",label:"Expiry Date",model:"PASSPORT_EXPIRY_DATE",placeholder:"Enter Date",required:!0,format:"YYYY/MM/DD",styleClasses:"col-md-4",visible:function(e){return e&&3===e.CITIZENSHIP}},{type:"vueMultiSelect",placeholder:"Please select",label:"Issuing Country",model:"ISSUING_COUNTRY",required:!0,validator:"required",selectOptions:{multiple:!1,closeOnSelect:!0,maxHeight:200,showLabels:!1,key:"value",label:"name"},styleClasses:"col-md-4",values:function(){return e.selectIssuingCountry},visible:function(e){return e&&3===e.CITIZENSHIP}},{type:"radios",label:"Gender",model:"GENDER",required:!0,validator:"required",styleClasses:"col-lg-12",values:function(){return e.radioGender}}]},{fields:[{type:"input",inputType:"date",label:"Date of Birth",model:"BIRTH_DATE",placeholder:"Enter Date",required:!0,validator:"required",format:"YYYY/MM/DD",styleClasses:"col-lg-4",onChanged:function(e,t,a,l){e.AGE=(new Date).getFullYear()-e.BIRTH_DATE.toString().substring(0,4)}},{type:"input",inputType:"number",label:"Age",model:"AGE",min:0,validator:"number",styleClasses:"col-lg-4"}]},{fields:[{type:"input",inputType:"text",label:"Hospital's MRN Number",model:"HOSPITAL_MRN",styleClasses:"col-lg-4"},{type:"input",inputType:"text",label:"Mentari's MRN Number",model:"MENTARI_MRN",styleClasses:"col-lg-4"}]},{styleClasses:"row",fields:[{type:"vueMultiSelect",placeholder:"Please select",label:"Employment Status",model:"EMPLOYMENT_STATUS",required:!0,validator:"required",selectOptions:{multiple:!1,closeOnSelect:!0,maxHeight:200,showLabels:!1,allowEmpty:!1,key:"value",label:"name"},styleClasses:"col-lg-4 ml-3",values:function(){return e.selectEmpStatus}}]},{styleClasses:"row",fields:[{type:"vueMultiSelect",placeholder:"Please select",label:"Household Income Status (monthly)",model:"INCOME_STATUS",required:!0,validator:"required",selectOptions:{multiple:!1,closeOnSelect:!0,maxHeight:200,showLabels:!1,allowEmpty:!1,key:"value",label:"name"},styleClasses:"col-lg-4 ml-3",values:function(){return e.selectIncomeStatus}}]},{styleClasses:"row",fields:[{type:"vueMultiSelect",placeholder:"Please select",label:"Race",model:"RACE",required:!0,validator:"required",selectOptions:{multiple:!1,closeOnSelect:!0,maxHeight:200,showLabels:!1,allowEmpty:!1,key:"value",label:"name"},styleClasses:"col-lg-4 ml-3",values:function(){return e.selectRace}},{type:"input",inputType:"text",label:"To Specify",model:"SPECIFY_RACE",validator:"string",required:!0,styleClasses:"col-lg-4",visible:function(e){return e&&4===e.RACE.value}}]},{styleClasses:"row",fields:[{type:"vueMultiSelect",placeholder:"Please select",label:"Religion",model:"RELIGION",required:!0,validator:"required",selectOptions:{multiple:!1,closeOnSelect:!0,maxHeight:200,showLabels:!1,allowEmpty:!1,key:"value",label:"name"},styleClasses:"col-lg-4 ml-3",values:function(){return e.selectReligion}},{type:"input",inputType:"text",label:"To Specify",model:"SPECIFY_RELIGION",validator:"string",required:!0,styleClasses:"col-lg-4",visible:function(e){return e&&99===e.RELIGION.value}}]},{styleClasses:"row",fields:[{type:"vueMultiSelect",placeholder:"Please select",label:"Marital Status",model:"MARITAL_STATUS",required:!0,validator:"required",selectOptions:{multiple:!1,closeOnSelect:!0,maxHeight:200,showLabels:!1,allowEmpty:!1,key:"value",label:"name"},styleClasses:"col-lg-4 ml-3",values:function(){return e.selectMaritalStatus}},{type:"input",inputType:"text",label:"To Specify",model:"SPECIFY_MARITAL_STATUS",validator:"string",required:!0,styleClasses:"col-lg-4",visible:function(e){return e&&4===e.MARITAL_STATUS.value}}]},{styleClasses:"row",fields:[{type:"vueMultiSelect",placeholder:"Please select",label:"Education Level",model:"EDUCATION_LEVEL",required:!0,validator:"required",selectOptions:{multiple:!1,closeOnSelect:!0,maxHeight:200,showLabels:!1,allowEmpty:!1,key:"value",label:"name"},styleClasses:"col-lg-4 ml-3",values:function(){return e.selectEducationLevel}}]}]},formOptions:{validateAfterLoad:!1,validateAfterChanged:!0}}},mounted:function(){var e=this;if(window.onbeforeunload=function(){return"Data will be lost if you leave the page, are you sure?"},this.$axios.get("http://127.0.0.1:8000/api/getDemographicData").then((function(t){e.radioCitizenship=t.data.citizenship,e.radioGender=t.data.gender,e.selectNRICType=t.data.NRICType,e.selectIssuingCountry=t.data.issuingCountry,e.selectEmpStatus=t.data.employmentStatus,e.selectIncomeStatus=e.getHouseholdIncome(t.data.householdIncome),e.selectRace=t.data.race,e.selectReligion=t.data.religion,e.selectMaritalStatus=t.data.marital,e.selectEducationLevel=t.data.education})),"edit"===this.$route.query.st){var t=JSON.parse(localStorage.getItem("ID"));this.update=!0,this.$axios.get("http://127.0.0.1:8000/api/getSHHARPDemographic?patientId="+t).then((function(t){var a=t.data.data;e.model.SH_NAME=a.name,e.model.CITIZENSHIP=a.citizenship_fk,null!=a.nric_type_fk&&(e.model.NRIC_TYPE={value:a.nric_type_fk,name:a.nric_type}),e.model.NRIC_NO=a.nric_no,e.model.PASSPORT_NO=a.passport_no,e.model.PASSPORT_EXPIRY_DATE=a.date_expiry,null!=a.issuing_country_fk&&(e.model.ISSUING_COUNTRY={value:a.issuing_country_fk,name:a.issuing_country}),e.model.GENDER=a.gender_fk,e.model.BIRTH_DATE=a.birthdate,e.model.AGE=(new Date).getFullYear()-a.birthdate.toString().substring(0,4),e.model.HOSPITAL_MRN=a.hospital_mrn,e.model.MENTARI_MRN=a.mentari_mrn,null!=a.employment_status_fk&&(e.model.EMPLOYMENT_STATUS={value:a.employment_status_fk,name:a.employment_status}),e.model.INCOME_STATUS=e.selectIncomeStatus[a.household_income_fk-1],e.model.RACE={value:a.ethnic_fk,name:a.ethnic},e.model.RELIGION={value:a.religion_fk,name:a.religion},e.model.MARITAL_STATUS={value:a.marital_fk,name:a.marital},e.model.EDUCATION_LEVEL={value:a.education_fk,name:a.education}}))}},methods:{getHouseholdIncome:function(e){for(var t=[],a=e.length,l=0;l<a;l++)0===e[l].min?t[l]={value:e[l].value,name:"Less than RM "+(e[l].max+1)}:t[l]=l===a-1?{value:e[l].value,name:"RM "+e[l].min+" and above"}:{value:e[l].value,name:"RM "+e[l].min+" - RM "+e[l].max};return t},validatePatient:function(){var e=this;return f(n.a.mark((function t(){var a,l,s;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="",e.model.PATIENT_EXIST_ID="",a=""!==e.model.NRIC_NO?e.model.NRIC_NO.replace(/-/g,""):e.model.PASSPORT_NO,l="http://127.0.0.1:8000/api/verifyPatient?id="+a,t.next=6,e.$axios.get(l);case 6:if(s=t.sent,""!==s.data.data&&(e.model.PATIENT_EXIST_ID=JSON.stringify(s.data.data[0].value)),""!==e.model.PATIENT_EXIST_ID){t.next=13;break}return e.patientExist=!1,t.abrupt("return",!0);case 13:return e.patientExist=!0,t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t)})))()},validateForm:function(){var e=this;return f(n.a.mark((function t(){var a,l,s;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.validateTabA(),t.next=3,e.validatePatient();case 3:l=t.sent,a&&l&&(e.submitPath=!0,s=new FormData,s.append("ptData",JSON.stringify(e.model)),e.$axios.post("http://127.0.0.1:8000/api/registerDemoSHHARP",s).then((function(t){localStorage.setItem("ID",t.data.patientId),e.$router.push({path:"SHHARP-profile"})})),e.launchToast(" Registration Successful"));case 5:case"end":return t.stop()}}),t)})))()},validateUpdateForm:function(){var e=this,t=this.validateTabA();if(t){this.submitPath=!0;var a=JSON.parse(localStorage.getItem("ID")),l=new FormData;l.append("ptData",JSON.stringify(this.model)),this.$axios.post("http://127.0.0.1:8000/api/updateSHHARPDemographic?patientId="+a,l).then((function(t){localStorage.setItem("ID",t.data.patientId),e.$router.push({path:"SHHARP-profile"})})),this.launchToast(" Details Updated")}},validateTabA:function(){var e=this.$refs.demographic.validate();return e?(this.tabA=!1,!0):(this.tabA=!0,!1)},launchToast:function(e){this.showToast(this.model.SH_NAME+e,{icon:"fa-check",position:"top-center",duration:2500,fullWidth:!1})}},beforeRouteLeave:function(e,t,a){if(!0===this.submitPath)a(!0);else{var l=window.confirm("Changes you made may not be saved.");a(!!l)}}},E=S,C=(a("60bc"),a("5414"),a("2877")),_=Object(C["a"])(E,l,s,!1,null,null,null);t["default"]=_.exports}}]);
//# sourceMappingURL=chunk-81b448d8.275b7b6f.js.map