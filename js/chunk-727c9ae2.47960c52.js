(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-727c9ae2"],{bf84:function(t,e,a){"use strict";a("e388")},d9cc:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("va-card",[a("div",{staticClass:"row align--center"},[a("div",{staticClass:"flex xs12 md6"},[a("h5",[t._v("LIST OF PATIENTS")])]),a("div",{staticClass:"flex xs12 md1 offset--md5"},[a("button",{staticClass:"ml-2 btn btn-fill btn-md btn-yellow btn-circle",attrs:{type:"button"},on:{click:function(e){return t.$router.push({name:"shharp-demographic"})}}},[a("div",{staticClass:"fa fa-plus"})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"flex xs12 md6"},[a("va-input",{attrs:{value:t.term,placeholder:t.$t("Search By Name/NRIC/Passport/MRN"),removable:""},on:{input:t.search}},[a("va-icon",{attrs:{slot:"prepend",name:"fa fa-search"},slot:"prepend"})],1)],1),a("div",{staticClass:"flex xs12 md3"},[a("va-date-picker",{attrs:{mode:"single",placeholder:"Filter By Self-Harm Start Date",label:"Start Date"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),a("div",{staticClass:"flex xs12 md3"},[a("va-date-picker",{attrs:{mode:"single",placeholder:"Filter By Self-Harm End Date",label:"End Date"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)]),a("va-data-table",{attrs:{fields:t.fields,data:t.filteredData,"per-page":parseInt(t.perPage),hoverable:!0,clickable:""},on:{"row-clicked":t.showPatientProfile},scopedSlots:t._u([{key:"no",fn:function(e){return[t._v(" "+t._s(e.rowIndex+1)+" ")]}},{key:"age",fn:function(e){return[t._v(" "+t._s(t.getAge(e.rowData.age))+" ")]}},{key:"date",fn:function(e){return[t._v(" "+t._s(t.getDate(e.rowData.date))+" ")]}}])}),a("div",{staticClass:"row"},[a("div",{staticClass:"flex xs12 md2 offset--md10"},[a("va-select",{attrs:{label:t.$t("tables.perPage"),options:t.perPageOptions,noClear:""},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)])],1)},n=[],r=a("2ef0"),i={data:function(){return{term:"",no:1,perPage:"25",perPageOptions:["25","50","100","150","200"],users:[],startDate:"",endDate:""}},mounted:function(){var t=this;this.$axios.get("http://127.0.0.1:8000/api/getSHHARPList").then((function(e){t.users=e.data.list}))},computed:{fields:function(){return[{name:"__slot:no",title:this.$t("NO"),width:"30px",height:"45px",dataClass:"text-center"},{name:"name",title:this.$t("NAME"),width:"25%"},{name:"__slot:age",title:this.$t("AGE"),width:"5%"},{name:"nricPassport",title:this.$t("NRIC/PASSPORT"),width:"20%"},{name:"mentari",title:this.$t("MENTARI"),width:"20%"},{name:"__slot:date",title:this.$t("LAST SEEN"),width:"13%"},{name:"status",title:this.$t("SHHARP FORM STATUS"),width:"12%"}]},filteredData:function(){var t=this;return(!this.term||this.term.length<1)&&""===this.startDate&&""===this.endDate?this.users:this.users.filter((function(e){return(e.name.toLowerCase().startsWith(t.term.toLowerCase())||e.nricPassport.toLowerCase().startsWith(t.term.toLowerCase()))&&e.selfHarmDate>=t.startDate&&e.selfHarmDate<=t.endDate}))}},methods:{getAge:function(t){if(null!==t)return(new Date).getFullYear()-t.toString().substring(0,4)},getDate:function(t){if(null!==t){var e=new Date(t),a=e.toLocaleDateString("en-MY");return a}},showPatientProfile:function(t){localStorage.setItem("ID",t.patient_id),this.$router.push({name:"shharp-profile"})},search:Object(r["debounce"])((function(t){this.term=t}),400)},watch:{startDate:function(){if(""!==this.startDate){var t=new Date(this.startDate);this.endDate=t.setDate(t.getDate()+30)}}}},l=i,o=(a("bf84"),a("2877")),c=Object(o["a"])(l,s,n,!1,null,null,null);e["default"]=c.exports},e388:function(t,e,a){}}]);
//# sourceMappingURL=chunk-727c9ae2.47960c52.js.map