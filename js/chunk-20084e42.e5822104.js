(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20084e42"],{"264d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[1==t.tabA?a("div",{staticClass:"mb-3"},[a("va-notification",{attrs:{color:"danger"}},[a("va-badge",{attrs:{color:"danger"}},[t._v(" "+t._s(t.$t("Incomplete"))+" ")]),a("span",[t._v("Please fill all required fields.")]),a("button",{staticClass:"btn close-button",attrs:{type:"button"},on:{click:function(e){t.tabA=!1}}},[a("span",{staticClass:"fa fa-close"})])],1)],1):t._e(),1==t.patientNotExist?a("div",{staticClass:"mb-3"},[a("va-notification",{attrs:{color:"danger"}},[a("va-badge",{attrs:{color:"danger"}},[t._v(" "+t._s(t.$t("Incomplete"))+" ")]),a("span",[t._v("Patient with the specified NRIC/PASSPORT does not exist.")]),a("button",{staticClass:"btn close-button",attrs:{type:"button"},on:{click:function(e){t.patientExist=!1}}},[a("span",{staticClass:"fa fa-close"})])],1)],1):t._e(),a("va-card",[a("div",{staticClass:"text-center"},[a("h4",{staticClass:"mt-4 mb-5 text-dark"},[t._v("BOOK APPOINTMENT")])]),a("vue-form-generator",{ref:"appointment",attrs:{model:t.model,schema:t.schema,options:t.formOptions}}),a("div",{staticClass:"mt-3"},[a("div",{staticClass:"float-left"},[a("button",{staticClass:"ml-2 btn btn-fill btn-md btn-red",attrs:{type:"button"},on:{click:t.cancelAppointment}},[t._v(" CANCEL ")])]),a("div",{staticClass:"float-right"},[a("button",{staticClass:"ml-2 btn btn-fill btn-md btn-blue",attrs:{type:"submit"},on:{click:t.validateForm}},[a("div",{staticClass:"fa fa-paper-plane"}),t._v(" CONFIRM ")])])])],1)],1)])])])},s=[],i=a("a34a"),o=a.n(i);function l(t,e,a,n,s,i,o){try{var l=t[i](o),r=l.value}catch(p){return void a(p)}l.done?e(r):Promise.resolve(r).then(n,s)}function r(t){return function(){var e=this,a=arguments;return new Promise((function(n,s){var i=t.apply(e,a);function o(t){l(i,n,s,o,r,"next",t)}function r(t){l(i,n,s,o,r,"throw",t)}o(void 0)}))}}var p={data:function(){var t=this;return{tabA:!1,submitPath:!1,patientNotExist:!1,requestAppointmentId:"",selectAppointmentType:[],selectVisitType:[],selectPatientCategory:[],selectAppointmentDuration:[],model:{NRIC_PASSPORT_NO:"",DATE:"",TIME:"",DURATION:"",APPOINTMENT_TYPE:"",VISIT_TYPE:"",PATIENT_CATEGORY:"",ASSIGNED_TEAM:"",PATIENT_FK:"",APPOINTMENT_ID:"",selectAssignedTeam:[]},schema:{groups:[{styleClasses:"row",fields:[{type:"input",inputType:"text",label:"NRIC/Passport Number",model:"NRIC_PASSPORT_NO",required:!0,validator:"string",hint:"Without ''-''",styleClasses:"col-md-6"}]},{styleClasses:"row",fields:[{type:"input",inputType:"date",label:"Date",model:"DATE",placeholder:"Enter Date",required:!0,validator:"date",format:"YYYY/MM/DD",styleClasses:"col-md-4"},{type:"input",inputType:"time",label:"Time",model:"TIME",required:!0,validator:"required",styleClasses:["col-md-4"]},{type:"vueMultiSelect",label:"Duration",placeholder:"Please select",model:"DURATION",required:!0,validator:"required",selectOptions:{multiple:!1,closeOnSelect:!0,maxHeight:200,showLabels:!1,key:"value",label:"name"},styleClasses:"col-md-4",values:function(){return t.selectAppointmentDuration}}]},{styleClasses:"row",fields:[{type:"vueMultiSelect",label:"Appointment Type",placeholder:"Please select",model:"APPOINTMENT_TYPE",required:!0,validator:"required",selectOptions:{multiple:!1,closeOnSelect:!0,maxHeight:200,showLabels:!1,key:"value",label:"name"},styleClasses:"col-md-6",values:function(){return t.selectAppointmentType}},{type:"vueMultiSelect",label:"Type of Visit",placeholder:"Please select",model:"VISIT_TYPE",required:!0,validator:"required",selectOptions:{multiple:!1,closeOnSelect:!0,maxHeight:200,showLabels:!1,key:"value",label:"name"},styleClasses:"col-md-6",values:function(){return t.selectVisitType}}]},{styleClasses:"row",fields:[{type:"vueMultiSelect",label:"Category of Patient",placeholder:"Please select",model:"PATIENT_CATEGORY",required:!0,validator:"required",selectOptions:{multiple:!1,closeOnSelect:!0,maxHeight:200,showLabels:!1,key:"value",label:"name"},styleClasses:"col-md-6",values:function(){return t.selectPatientCategory},onChanged:function(t){var e=this;this.$axios.get("http://127.0.0.1:8000/api/getAssignedTeam?id="+t.PATIENT_CATEGORY.value).then((function(t){e.model.selectAssignedTeam=t.data.data}))}},{type:"vueMultiSelect",label:"Assigned Team",placeholder:"Please select",model:"ASSIGNED_TEAM",required:!0,validator:"required",selectOptions:{multiple:!1,closeOnSelect:!0,maxHeight:200,showLabels:!1,key:"value",label:"name"},styleClasses:"col-md-6",values:function(){return t.model.selectAssignedTeam}}]}]},formOptions:{validateAfterLoad:!1,validateAfterChanged:!0}}},mounted:function(){var t=this;if(this.$axios.get("http://127.0.0.1:8000/api/getAppointmentMountedData").then((function(e){t.selectVisitType=e.data.visitType,t.selectPatientCategory=e.data.patientCategory,t.selectAppointmentType=e.data.appointmentType,t.selectAppointmentDuration=e.data.appointmentDuration})),"edit"===this.$route.query.st){var e=localStorage.getItem("appointmentId");this.$axios.get("http://127.0.0.1:8000/api/getAppointmentData?appointmentId="+e).then((function(e){console.log(e.data.data),t.model.NRIC_PASSPORT_NO=e.data.data[0].nricPassport,t.model.DATE=e.data.data[0].date,t.model.TIME=e.data.data[0].time,t.model.DURATION={name:e.data.data[0].durationName,value:e.data.data[0].durationValue},t.model.APPOINTMENT_TYPE={value:e.data.data[0].appointmentTypeValue,name:e.data.data[0].appointmentTypeName},t.model.VISIT_TYPE={value:e.data.data[0].visitTypeValue,name:e.data.data[0].visitTypeName},t.model.PATIENT_CATEGORY={value:e.data.data[0].patientCategoryValue,name:e.data.data[0].patientCategoryName},t.model.ASSIGNED_TEAM={value:e.data.data[0].assignedTeamValue,name:e.data.data[0].assignedTeamName},t.model.APPOINTMENT_ID=e.data.data[0].appointment_id}))}"reqApp"===this.$route.query.st&&(this.requestAppointmentId=localStorage.getItem("requestAppointmentId"),this.model.NRIC_PASSPORT_NO=localStorage.getItem("nricPassport"),this.model.PATIENT_FK=localStorage.getItem("ID"))},methods:{cancelAppointment:function(){var t=this;return r(o.a.mark((function e(){var a,n,s;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("edit"!==t.$route.query.st){e.next=9;break}return a=localStorage.getItem("appointmentId"),n=new FormData,n.append("appointmentId",a),s="http://127.0.0.1:8000/api/deleteAppointment",e.next=7,t.$axios.post(s,n);case 7:t.submitPath=!0,t.launchToast(" Appointment has been deleted!");case 9:t.$router.push({name:"patient-appointmentList"});case 10:case"end":return e.stop()}}),e)})))()},validateForm:function(){var t=this;return r(o.a.mark((function e(){var a,n,s,i,l,r;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.validateTabA(),"reqApp"!==t.$route.query.st){e.next=5;break}a&&(n=new FormData,n.append("requestAppointmentId",t.requestAppointmentId),t.$axios.post("http://127.0.0.1:8000/api/deleteRequestAppointment",n).then((function(t){return t.data})),s=new FormData,s.append("apptData",JSON.stringify(t.model)),t.$axios.post("http://127.0.0.1:8000/api/bookAppointment",s).then((function(t){return t.data})),t.launchToast(" Appointment for "+t.model.NRIC_PASSPORT_NO+" Booked Successful !"),t.submitPath=!0,t.$router.push({name:"patient-appointmentList"})),e.next=9;break;case 5:return e.next=7,t.validatePatient();case 7:i=e.sent,a&&i&&("edit"===t.$route.query.st?(l=new FormData,l.append("apptData",JSON.stringify(t.model)),t.$axios.post("http://127.0.0.1:8000/api/updateAppointment",l).then((function(t){return t.data})),t.launchToast(" Appointment for "+t.model.NRIC_PASSPORT_NO+" Updated Successful !")):(r=new FormData,r.append("apptData",JSON.stringify(t.model)),t.$axios.post("http://127.0.0.1:8000/api/bookAppointment",r).then((function(t){return t.data})),t.launchToast(" Appointment for "+t.model.NRIC_PASSPORT_NO+" Booked Successful !")),t.submitPath=!0,t.$router.push({name:"patient-appointmentList"}));case 9:case"end":return e.stop()}}),e)})))()},validatePatient:function(){var t=this;return r(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="http://127.0.0.1:8000/api/verifyPatient?id="+t.model.NRIC_PASSPORT_NO,e.next=3,t.$axios.get(a);case 3:if(n=e.sent,""!==n.data.data&&(t.model.PATIENT_FK=JSON.stringify(n.data.data[0].value)),""===t.model.PATIENT_FK){e.next=10;break}return t.patientNotExist=!1,e.abrupt("return",!0);case 10:return t.patientNotExist=!0,e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})))()},validateTabA:function(){var t=this.$refs.appointment.validate();return t?(this.tabA=!1,!0):(this.tabA=!0,!1)},launchToast:function(t){this.showToast(t,{icon:"fa-check",position:"top-center",duration:2500,fullWidth:!1})}},beforeRouteLeave:function(t,e,a){if(!0===this.submitPath)a(!0);else{var n=window.confirm("Changes you made may not be saved.");a(!!n)}}},d=p,u=(a("9a54"),a("2877")),c=Object(u["a"])(d,n,s,!1,null,null,null);e["default"]=c.exports},"5fbb":function(t,e,a){},"9a54":function(t,e,a){"use strict";a("5fbb")}}]);
//# sourceMappingURL=chunk-20084e42.e5822104.js.map