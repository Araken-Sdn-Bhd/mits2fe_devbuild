(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e06ec74"],{3407:function(t,e,a){},"68aa":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[1==t.tabA?a("div",{staticClass:"mb-3"},[a("va-notification",{attrs:{color:"danger"}},[a("va-badge",{attrs:{color:"danger"}},[t._v(" "+t._s(t.$t("Incomplete"))+" ")]),a("span",[t._v("Please fill all required fields.")]),a("button",{staticClass:"btn close-button",attrs:{type:"button"},on:{click:function(e){t.tabA=!1}}},[a("span",{staticClass:"fa fa-close"})])],1)],1):t._e(),a("va-card",[a("div",{staticClass:"text-center"},[a("h3",{staticClass:"mt-4 mb-5 text-dark"},[t._v("INTERNAL REFERRAL LETTER")])]),a("va-accordion",{staticClass:"my-4"},[a("va-collapse",[a("span",{attrs:{slot:"header"},slot:"header"},[a("b",[t._v("PATIENT DETAILS")])]),a("div",{attrs:{slot:"body"},slot:"body"},[a("vue-form-generator",{ref:"patientDetails",attrs:{model:t.model,schema:t.patientSchema,options:t.formOptions}})],1)]),a("va-collapse",[a("span",{attrs:{slot:"header"},slot:"header"},[a("b",[t._v("FROM")])]),a("div",{attrs:{slot:"body"},slot:"body"},[a("vue-form-generator",{ref:"referral",attrs:{schema:t.referralSchema,model:t.model,options:t.formOptions}})],1)])],1),a("vue-form-generator",{ref:"staffDetails",attrs:{schema:t.staffSchema,model:t.model,options:t.formOptions}}),a("h6",[t._v(t._s(t.model))]),a("div",{staticClass:"mt-3"},[a("div",{staticClass:"float-right"},[a("button",{staticClass:"ml-2 btn btn-fill btn-md btn-blue",attrs:{type:"submit"},on:{click:t.validateForm}},[a("div",{staticClass:"fa fa-paper-plane"}),t._v(" SUBMIT ")])])])],1)],1)])])])},l=[],i={data:function(){return{tabA:!1,submitPath:!1,model:{PATIENT_NAME:"",NRIC_PASSPORT:"",AGE:"",CONTACT_NO:"",ADDRESS:"",MENTARI_ADDRESS:"",DIAGNOSIS:"",REFERRAL_REASON:"",SUMMARY:"",MANAGEMENT:"",MEDICATION:"",NAME:"",DESIGNATION:"",HOSPITAL:""},patientSchema:{groups:[{fields:[{type:"label",label:"Patient Name: ",featured:!0,styleClasses:"col-lg-2"},{type:"label",model:"PATIENT_NAME",styleClasses:"col-lg-4"},{type:"label",label:"NRIC/Passport No: ",featured:!0,styleClasses:"col-lg-2"},{type:"label",model:"NRIC_PASSPORT",styleClasses:"col-lg-4"},{type:"label",label:"Age: ",featured:!0,styleClasses:"col-lg-2"},{type:"label",model:"AGE",styleClasses:"col-lg-4"},{type:"label",label:"Contact No: ",featured:!0,styleClasses:"col-lg-2"},{type:"label",model:"CONTACT_NO",styleClasses:"col-lg-4"},{type:"label",label:"Address: ",featured:!0,styleClasses:"col-lg-2"},{type:"label",model:"ADDRESS",styleClasses:"col-lg-4"}]}]},referralSchema:{groups:[{fields:[{type:"label",model:"MENTARI_ADDRESS"},{type:"label",label:"Dear Dr, <br> Thank you for seeing this patient."},{type:"input",inputType:"text",label:"Diagnosis",model:"DIAGNOSIS",required:!0,validator:"string",styleClasses:"col-md-12"},{type:"textArea",label:"Reason for Referral",model:"REFERRAL_REASON",rows:3,required:!0,validator:"string",styleClasses:"col-md-12"},{type:"textArea",label:"Summary",model:"SUMMARY",rows:2,required:!0,validator:"string",styleClasses:"col-md-12"},{type:"input",inputType:"text",label:"Management",model:"MANAGEMENT",required:!0,validator:"string",styleClasses:"col-md-12"},{type:"input",inputType:"text",label:"Medication",model:"MEDICATION",required:!0,validator:"string",styleClasses:"col-md-12"},{type:"label",label:"Thank you,"}]}]},staffSchema:{groups:[{styleClasses:"row",fields:[{type:"input",inputType:"text",label:"Name",model:"NAME",required:!0,validator:"string",styleClasses:"col-md-6"}]},{styleClasses:"row",fields:[{type:"input",inputType:"text",label:"Designation",model:"DESIGNATION",required:!0,validator:"string",styleClasses:"col-md-6"}]},{styleClasses:"row",fields:[{type:"input",inputType:"text",label:"Hospital",model:"HOSPITAL",required:!0,validator:"string",styleClasses:"col-md-6"}]}]},formOptions:{validateAfterLoad:!1,validateAfterChanged:!0}}},mounted:function(){var t=this,e=JSON.parse(localStorage.getItem("ID"));this.$axios.get("http://127.0.0.1:8000/api/getInternalReferralLetterMountedData?patient_id="+e).then((function(e){t.model.PATIENT_NAME=e.data.patientData[0].name,t.model.NRIC_PASSPORT=e.data.patientData[0].nricPassport,null!==e.data.patientData[0].birthdate&&(t.model.AGE=(new Date).getFullYear()-e.data.patientData[0].birthdate.toString().substring(0,4)),t.model.CONTACT_NO=e.data.patientData[0].contact,t.model.ADDRESS=e.data.patientData[0].address}))},methods:{validateForm:function(){var t=this.validateTabA(),e=this.validateTabB();if(t&&e){var a=new FormData;a.append("psychiatryClerkingNote",JSON.stringify(this.model)),this.$axios.post("http://127.0.0.1:8000/api/savePsychiatryClerkingNote",a).then((function(t){return t.data})),this.launchToast("Pyschiatry Clerking Note for the Patient Saved Successfully!"),this.submitPath=!0,this.$router.push({name:"patient-appointmentList"})}},validateTabA:function(){var t=this.$refs.referral.validate();return t?(this.tabA=!1,!0):(this.tabA=!0,!1)},validateTabB:function(){var t=this.$refs.staffDetails.validate();return t?(this.tabA=!1,!0):(this.tabA=!0,!1)},launchToast:function(t){this.showToast(t,{icon:"fa-check",position:"top-center",duration:2500,fullWidth:!1})}},beforeRouteLeave:function(t,e,a){if(!0===this.submitPath)a(!0);else{var s=window.confirm("Changes you made may not be saved.");a(!!s)}}},o=i,r=(a("fd6a"),a("2877")),n=Object(r["a"])(o,s,l,!1,null,null,null);e["default"]=n.exports},fd6a:function(t,e,a){"use strict";a("3407")}}]);
//# sourceMappingURL=chunk-2e06ec74.70c12c3c.js.map